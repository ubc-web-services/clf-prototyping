var Formstone=this.Formstone=function(e,t,n,i){"use strict";function a(e){u.Plugins[e].initialized||(u.Plugins[e].methods._setup.call(n),u.Plugins[e].initialized=!0)}function s(e,t,n,i){var a,s={raw:{}};i=i||{};for(a in i)i.hasOwnProperty(a)&&("classes"===e?(s.raw[i[a]]=t+"-"+i[a],s[i[a]]="."+t+"-"+i[a]):(s.raw[a]=i[a],s[a]=i[a]+"."+t));for(a in n)n.hasOwnProperty(a)&&("classes"===e?(s.raw[a]=n[a].replace(/{ns}/g,t),s[a]=n[a].replace(/{ns}/g,"."+t)):(s.raw[a]=n[a].replace(/.{ns}/g,""),s[a]=n[a].replace(/{ns}/g,t)));return s}function o(){var e,t={transition:"transitionend",MozTransition:"transitionend",OTransition:"otransitionend",WebkitTransition:"webkitTransitionEnd"},i=["transition","-webkit-transition"],a={transform:"transform",MozTransform:"-moz-transform",OTransform:"-o-transform",msTransform:"-ms-transform",webkitTransform:"-webkit-transform"},s="transitionend",o="",r="",l=n.createElement("div");for(e in t)if(t.hasOwnProperty(e)&&e in l.style){s=t[e],u.support.transition=!0;break}f.transitionEnd=s+".{ns}";for(e in i)if(i.hasOwnProperty(e)&&i[e]in l.style){o=i[e];break}u.transition=o;for(e in a)if(a.hasOwnProperty(e)&&a[e]in l.style){u.support.transform=!0,r=a[e];break}u.transform=r}function r(){u.windowWidth=u.$window.width(),u.windowHeight=u.$window.height(),m=p.startTimer(m,v,l)}function l(){for(var e in u.ResizeHandlers)u.ResizeHandlers.hasOwnProperty(e)&&u.ResizeHandlers[e].callback.call(t,u.windowWidth,u.windowHeight)}function c(e,t){return parseInt(e.priority)-parseInt(t.priority)}var d=function(){this.Version="0.5.14",this.Plugins={},this.ResizeHandlers=[],this.window=t,this.$window=e(t),this.document=n,this.$document=e(n),this.$body=null,this.windowWidth=0,this.windowHeight=0,this.userAgent=t.navigator.userAgent||t.navigator.vendor||t.opera,this.isFirefox=/Firefox/i.test(this.userAgent),this.isChrome=/Chrome/i.test(this.userAgent),this.isSafari=/Safari/i.test(this.userAgent)&&!this.isChrome,this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(this.userAgent),this.isFirefoxMobile=this.isFirefox&&this.isMobile,this.transform=null,this.transition=null,this.support={file:!!(t.File&&t.FileList&&t.FileReader),history:!!(t.history&&t.history.pushState&&t.history.replaceState),matchMedia:!(!t.matchMedia&&!t.msMatchMedia),raf:!(!t.requestAnimationFrame||!t.cancelAnimationFrame),touch:!!("ontouchstart"in t||t.DocumentTouch&&n instanceof t.DocumentTouch),transition:!1,transform:!1}},p={killEvent:function(e,t){try{e.preventDefault(),e.stopPropagation(),t&&e.stopImmediatePropagation()}catch(n){}},startTimer:function(e,t,n,i){return p.clearTimer(e),i?setInterval(n,t):setTimeout(n,t)},clearTimer:function(e,t){e&&(t?clearInterval(e):clearTimeout(e),e=null)},sortAsc:function(e,t){return parseInt(t)-parseInt(e)},sortDesc:function(e,t){return parseInt(t)-parseInt(e)}},u=new d,h={base:"{ns}",element:"{ns}-element"},f={namespace:".{ns}",blur:"blur.{ns}",change:"change.{ns}",click:"click.{ns}",dblClick:"dblclick.{ns}",drag:"drag.{ns}",dragEnd:"dragend.{ns}",dragEnter:"dragenter.{ns}",dragLeave:"dragleave.{ns}",dragOver:"dragover.{ns}",dragStart:"dragstart.{ns}",drop:"drop.{ns}",error:"error.{ns}",focus:"focus.{ns}",focusIn:"focusin.{ns}",focusOut:"focusout.{ns}",input:"input.{ns}",keyDown:"keydown.{ns}",keyPress:"keypress.{ns}",keyUp:"keyup.{ns}",load:"load.{ns}",mouseDown:"mousedown.{ns}",mouseEnter:"mouseenter.{ns}",mouseLeave:"mouseleave.{ns}",mouseMove:"mousemove.{ns}",mouseOut:"mouseout.{ns}",mouseOver:"mouseover.{ns}",mouseUp:"mouseup.{ns}",resize:"resize.{ns}",scroll:"scroll.{ns}",select:"select.{ns}",touchCancel:"touchcancel.{ns}",touchEnd:"touchend.{ns}",touchLeave:"touchleave.{ns}",touchMove:"touchmove.{ns}",touchStart:"touchstart.{ns}"};d.prototype.Plugin=function(n,i){return u.Plugins[n]=function(n,i){function o(t){var s="object"===e.type(t);t=e.extend(!0,{},i.defaults||{},s?t:{});for(var o=this,r=0,c=o.length;c>r;r++){var d=o.eq(r);if(!l(d)){var p=d.data(n+"-options"),u=e.extend(!0,{$el:d},t,"object"===e.type(p)?p:{});d.addClass(i.classes.raw.element).data(b,u),a(n),i.methods._construct.apply(d,[u].concat(Array.prototype.slice.call(arguments,s?1:0)))}}return o}function r(e){i.functions.iterate.apply(this,[i.methods._destruct].concat(Array.prototype.slice.call(arguments,1))),this.removeClass(i.classes.raw.element).removeData(b)}function l(e){return e.data(b)}function d(t){if(this instanceof e){var n=i.methods[t];return"object"!==e.type(t)&&t?n&&0!==t.indexOf("_")?i.functions.iterate.apply(this,[n].concat(Array.prototype.slice.call(arguments,1))):this:o.apply(this,arguments)}}function m(n){var a=i.utilities[n]||i.utilities._initialize||!1;return a?a.apply(t,Array.prototype.slice.call(arguments,"object"===e.type(n)?0:1)):void 0}function v(t){i.defaults=e.extend(!0,i.defaults,t||{})}function g(t){for(var n=this,i=0,a=n.length;a>i;i++){var s=n.eq(i),o=l(s)||{};"undefined"!==e.type(o.$el)&&t.apply(s,[o].concat(Array.prototype.slice.call(arguments,1)))}return n}var b="fs-"+n;return i.initialized=!1,i.priority=i.priority||10,i.classes=s("classes",b,h,i.classes),i.events=s("events",n,f,i.events),i.functions=e.extend({getData:l,iterate:g},p,i.functions),i.methods=e.extend(!0,{_setup:e.noop,_construct:e.noop,_destruct:e.noop,_resize:!1,destroy:r},i.methods),i.utilities=e.extend(!0,{_initialize:!1,_delegate:!1,defaults:v},i.utilities),i.widget&&(e.fn[n]=d),e[n]=i.utilities._delegate||m,i.namespace=n,i.methods._resize&&(u.ResizeHandlers.push({namespace:n,priority:i.priority,callback:i.methods._resize}),u.ResizeHandlers.sort(c)),i}(n,i),u.Plugins[n]};var m=null,v=20;return u.$window.on("resize.fs",r),r(),e(function(){u.$body=e("body");for(var t in u.Plugins)u.Plugins.hasOwnProperty(t)&&a(t)}),f.clickTouchStart=f.click+" "+f.touchStart,o(),u}(jQuery,this,document);!function(e,t,n){"use strict";function i(t){t=t||{};for(var n in y)y.hasOwnProperty(n)&&(u[n]=t[n]?e.merge(t[n],u[n]):u[n]);u=e.extend(u,t),u.minWidth.sort(v.sortDesc),u.maxWidth.sort(v.sortAsc),u.minHeight.sort(v.sortDesc),u.maxHeight.sort(v.sortAsc);for(var i in y)if(y.hasOwnProperty(i)){w[i]={};for(var a in u[i])if(u[i].hasOwnProperty(a)){var s=window.matchMedia("("+y[i]+": "+(u[i][a]===1/0?1e5:u[i][a])+u.unit+")");s.addListener(r),w[i][u[i][a]]=s}}r()}function a(e,t,n){var i=m.matchMedia(t),a=c(i.media);b[a]||(b[a]={mq:i,active:!0,enter:{},leave:{}},b[a].mq.addListener(l));for(var s in n)n.hasOwnProperty(s)&&b[a].hasOwnProperty(s)&&(b[a][s][e]=n[s]);l(b[a].mq)}function s(e,t){if(e)if(t){var n=c(t);b[n]&&(b[n].enter[e]&&delete b[n].enter[e],b[n].leave[e]&&delete b[n].leave[e])}else for(var i in b)b.hasOwnProperty(i)&&(b[i].enter[e]&&delete b[i].enter[e],b[i].leave[e]&&delete b[i].leave[e])}function o(){g={unit:u.unit};for(var e in y)if(y.hasOwnProperty(e))for(var t in w[e])if(w[e].hasOwnProperty(t)&&w[e][t].matches){var n="Infinity"===t?1/0:parseInt(t,10);e.indexOf("max")>-1?(!g[e]||n<g[e])&&(g[e]=n):(!g[e]||n>g[e])&&(g[e]=n)}}function r(){o(),f.trigger(h.mqChange,[g])}function l(e){var t=c(e.media),n=b[t],i=e.matches?h.enter:h.leave;if(n&&n.active||!n.active&&e.matches){for(var a in n[i])n[i].hasOwnProperty(a)&&n[i][a].apply(n.mq);n.active=!0}}function c(e){return e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"").replace(/^\s+|\s+$/g,"")}function d(){return g}var p=t.Plugin("mediaquery",{utilities:{_initialize:i,state:d,bind:a,unbind:s},events:{mqChange:"mqchange"}}),u={minWidth:[0],maxWidth:[1/0],minHeight:[0],maxHeight:[1/0],unit:"px"},h=e.extend(p.events,{enter:"enter",leave:"leave"}),f=t.$window,m=f[0],v=p.functions,g=null,b=[],w={},y={minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height"}}(jQuery,Formstone),!function(e,t,n){"use strict";function i(e){e.touches=[],e.touching=!1,e.tap?(e.pan=!1,e.scale=!1,e.swipe=!1,t.support.touch?this.on([b.touchStart,b.pointerDown].join(" "),e,o):this.on(b.click,e,p)):(e.pan||e.swipe||e.scale)&&(e.tap=!1,e.swipe&&(e.pan=!0),e.scale&&(e.axis=!1),e.axis?(e.axisX="x"===e.axis,e.axisY="y"===e.axis):m(this,"none"),this.on([b.touchStart,b.pointerDown].join(" "),e,s),e.pan&&!t.support.touch&&this.on(b.mouseDown,e,o))}function a(e){m(this.off(b.namespace),"")}function s(e){e.preventManipulation&&e.preventManipulation();var t=e.data,n=e.originalEvent;if(n.type.match(/(up|end)$/i))return void d(e);if(n.pointerId){var i=!1;for(var a in t.touches)t.touches[a].id===n.pointerId&&(i=!0,t.touches[a].pageX=n.clientX,t.touches[a].pageY=n.clientY);i||t.touches.push({id:n.pointerId,pageX:n.clientX,pageY:n.clientY})}else t.touches=n.touches;n.type.match(/(down|start)$/i)?o(e):n.type.match(/move$/i)&&r(e)}function o(t){var n=t.data,i="undefined"!==e.type(n.touches)?n.touches[0]:null;if(n.touching||(n.startE=t.originalEvent,n.startX=i?i.pageX:t.pageX,n.startY=i?i.pageY:t.pageY,n.startT=(new Date).getTime(),n.scaleD=1,n.passed=!1),n.tap)n.clicked=!1,n.$el.on([b.touchMove,b.pointerMove].join(" "),n,s).on([b.touchEnd,b.touchCancel,b.pointerUp,b.pointerCancel].join(" "),n,s);else if(n.pan||n.scale){n.$links&&n.$links.off(b.click);var a=u(n.scale?b.scaleStart:b.panStart,t,n.startX,n.startY,n.scaleD,0,0,"","");if(n.scale&&n.touches&&n.touches.length>=2){var o=n.touches;n.pinch={startX:h(o[0].pageX,o[1].pageX),startY:h(o[0].pageY,o[1].pageY),startD:f(o[1].pageX-o[0].pageX,o[1].pageY-o[0].pageY)},a.pageX=n.startX=n.pinch.startX,a.pageY=n.startY=n.pinch.startY}n.touching||(n.touching=!0,n.pan&&y.on(b.mouseMove,n,r).on(b.mouseUp,n,d),y.on([b.touchMove,b.touchEnd,b.touchCancel,b.pointerMove,b.pointerUp,b.pointerCancel].join(" "),n,s),n.$el.trigger(a))}}function r(t){var n=t.data,i="undefined"!==e.type(n.touches)?n.touches[0]:null,a=i?i.pageX:t.pageX,s=i?i.pageY:t.pageY,o=a-n.startX,r=s-n.startY,l=o>0?"right":"left",c=r>0?"down":"up",p=Math.abs(o)>x,m=Math.abs(r)>x;if(n.tap)(p||m)&&n.$el.off([b.touchMove,b.touchEnd,b.touchCancel,b.pointerMove,b.pointerUp,b.pointerCancel].join(" "));else if(n.pan||n.scale)if(!n.passed&&n.axis&&(n.axisX&&m||n.axisY&&p))d(t);else{!n.passed&&(!n.axis||n.axis&&n.axisX&&p||n.axisY&&m)&&(n.passed=!0),n.passed&&(w.killEvent(t),w.killEvent(n.startE));var v=!0,g=u(n.scale?b.scale:b.pan,t,a,s,n.scaleD,o,r,l,c);if(n.scale)if(n.touches&&n.touches.length>=2){var y=n.touches;n.pinch.endX=h(y[0].pageX,y[1].pageX),n.pinch.endY=h(y[0].pageY,y[1].pageY),n.pinch.endD=f(y[1].pageX-y[0].pageX,y[1].pageY-y[0].pageY),n.scaleD=n.pinch.endD/n.pinch.startD,g.pageX=n.pinch.endX,g.pageY=n.pinch.endY,g.scale=n.scaleD,g.deltaX=n.pinch.endX-n.pinch.startX,g.deltaY=n.pinch.endY-n.pinch.startY}else n.pan||(v=!1);v&&n.$el.trigger(g)}}function l(t,n){t.on(b.click,n,c);var i=e._data(t[0],"events").click;i.unshift(i.pop())}function c(e){w.killEvent(e,!0),e.data.$links.off(b.click)}function d(t){var n=t.data;if(n.tap)n.$el.off([b.touchMove,b.touchEnd,b.touchCancel,b.pointerMove,b.pointerUp,b.pointerCancel,b.mouseMove,b.mouseUp].join(" ")),n.startE.preventDefault(),p(t);else if(n.pan||n.scale){var i="undefined"!==e.type(n.touches)?n.touches[0]:null,a=i?i.pageX:t.pageX,s=i?i.pageY:t.pageY,o=a-n.startX,r=s-n.startY,c=(new Date).getTime(),d=n.scale?b.scaleEnd:b.panEnd,h=o>0?"right":"left",f=r>0?"down":"up",m=Math.abs(o)>1,v=Math.abs(r)>1;if(n.swipe&&Math.abs(o)>x&&c-n.startT<k&&(d=b.swipe),n.axis&&(n.axisX&&v||n.axisY&&m)||m||v){n.$links=n.$el.find("a");for(var g=0,w=n.$links.length;w>g;g++)l(n.$links.eq(g),n)}var C=u(d,t,a,s,n.scaleD,o,r,h,f);y.off([b.touchMove,b.touchEnd,b.touchCancel,b.mouseMove,b.mouseUp,b.pointerMove,b.pointerUp,b.pointerCancel].join(" ")),n.$el.trigger(C),n.touches=[],n.scale}n.touching=!1}function p(e){w.killEvent(e);var t=e.data;if(!t.clicked){"click"!==e.type&&(t.clicked=!0);var n=t.startE?t.startX:e.pageX,i=t.startE?t.startY:e.pageY,a=u(b.tap,e.originalEvent,n,i,1,0,0);t.$el.trigger(a)}}function u(t,n,i,a,s,o,r,l,c){return e.Event(t,{originalEvent:n,bubbles:!0,pageX:i,pageY:a,scale:s,deltaX:o,deltaY:r,directionX:l,directionY:c})}function h(e,t){return(e+t)/2}function f(e,t){return Math.sqrt(e*e+t*t)}function m(e,t){e.css({"-ms-touch-action":t,"touch-action":t})}var v=!t.window.PointerEvent,g=t.Plugin("touch",{widget:!0,defaults:{axis:!1,pan:!1,scale:!1,swipe:!1,tap:!1},methods:{_construct:i,_destruct:a},events:{pointerDown:v?"MSPointerDown":"pointerdown",pointerUp:v?"MSPointerUp":"pointerup",pointerMove:v?"MSPointerMove":"pointermove",pointerCancel:v?"MSPointerCancel":"pointercancel"}}),b=g.events,w=g.functions,y=t.$window,x=5,k=200;b.tap="tap",b.pan="pan",b.panStart="panstart",b.panEnd="panend",b.scale="scale",b.scaleStart="scalestart",b.scaleEnd="scaleend",b.swipe="swipe"}(jQuery,Formstone),!function(e,t,n){"use strict";function i(t){var n=this.closest("label"),i=n.length?n.eq(0):e("label[for="+this.attr("id")+"]"),a=[v.base,t.customClass].join(" "),s="";t.radio="radio"===this.attr("type"),t.group=this.attr("name"),s+='<div class="'+v.marker+'">',s+='<div class="'+v.flag+'"></div>',t.toggle&&(a+=" "+v.toggle,s+='<span class="'+[v.state,v.state_on].join(" ")+'">'+t.labels.on+"</span>",s+='<span class="'+[v.state,v.state_off].join(" ")+'">'+t.labels.off+"</span>"),t.radio&&(a+=" "+v.radio),s+="</div>",i.length?i.addClass(v.label).wrap('<div class="'+a+'"></div>').before(s):this.before('<div class=" '+a+'">'+s+"</div>"),t.$checkbox=i.length?i.parents(m.base):this.prev(m.base),t.$marker=t.$checkbox.find(m.marker),t.$states=t.$checkbox.find(m.state),t.$label=i,this.is(":checked")&&t.$checkbox.addClass(v.checked),this.is(":disabled")&&t.$checkbox.addClass(v.disabled),this.wrap('<div class="'+v.element_wrapper+'"></div>'),this.on(g.focus,t,u).on(g.blur,t,h).on(g.change,t,c).on(g.click,t,l).on(g.deselect,t,p),t.$checkbox.touch({tap:!0}).on(g.tap,t,l)}function a(e){e.$checkbox.off(g.namespace).touch("destroy"),e.$marker.remove(),e.$states.remove(),e.$label.unwrap().removeClass(v.label),this.unwrap().off(g.namespace)}function s(e){this.prop("disabled",!1),e.$checkbox.removeClass(v.disabled)}function o(e){this.prop("disabled",!0),e.$checkbox.addClass(v.disabled)}function r(e){var t=e.$el.is(":disabled"),n=e.$el.is(":checked");t||(n?d({data:e}):p({data:e}))}function l(t){t.stopPropagation();var n=t.data;e(t.target).is(n.$el)||(t.preventDefault(),n.$el.trigger("click"))}function c(e){var t=e.data,n=t.$el.is(":disabled"),i=t.$el.is(":checked");n||(t.radio?d(e):i?d(e):p(e))}function d(t){t.data.radio&&e('input[name="'+t.data.group+'"]').not(t.data.$el).trigger("deselect"),t.data.$checkbox.addClass(v.checked)}function p(e){e.data.$checkbox.removeClass(v.checked)}function u(e){e.data.$checkbox.addClass(v.focus)}function h(e){e.data.$checkbox.removeClass(v.focus)}var f=t.Plugin("checkbox",{widget:!0,defaults:{customClass:"",toggle:!1,labels:{on:"ON",off:"OFF"}},classes:["element_wrapper","label","marker","flag","radio","focus","checked","disabled","toggle","state","state_on","state_off"],methods:{_construct:i,_destruct:a,enable:s,disable:o,update:r},events:{deselect:"deselect",tap:"tap"}}),m=f.classes,v=m.raw,g=f.events;f.functions}(jQuery,Formstone),!function(e,t,n){"use strict";function i(){j=t.$body}function a(n){n.multiple=this.prop("multiple"),n.disabled=this.is(":disabled"),n.multiple?n.links=!1:n.external&&(n.links=!0);var i=this.find(":selected").not(":disabled"),a=i.text(),s=this.find("option").index(i);n.multiple||""===n.label?n.label="":(i=this.prepend('<option value="" class="'+X.item_placeholder+'" selected>'+n.label+"</option>"),a=n.label,s=0);var o=this.find("option, optgroup"),r=o.filter("option");n.tabIndex=this[0].tabIndex,this[0].tabIndex=-1;var l=[X.base,n.customClass];n.mobile||t.isMobile?l.push(X.mobile):n.cover&&l.push(X.cover),n.multiple&&l.push(X.multiple),n.disabled&&l.push(X.disabled);var p='<div class="'+l.join(" ")+'" tabindex="'+n.tabIndex+'"></div>',u="";n.multiple||(u+='<button type="button" class="'+X.selected+'">',u+=e("<span></span>").text(_(a,n.trim)).html(),u+="</button>"),u+='<div class="'+X.options+'">',u+="</div>",this.wrap(p).after(u),n.$dropdown=this.parent(P.base),n.$allOptions=o,n.$options=r,n.$selected=n.$dropdown.find(P.selected),n.$wrapper=n.$dropdown.find(P.options),n.$placeholder=n.$dropdown.find(P.placeholder),n.index=-1,n.guid=O++,n.closed=!0,n.keyDownGUID=Y.keyDown+n.guid,n.clickGUID=Y.click+n.guid,c(n),n.multiple||y(s,n),n.$selected.touch({tap:!0}).on(Y.tap,n,d),n.$dropdown.on(Y.click,P.item,n,m).on(Y.close,n,f),this.on(Y.change,n,v),t.isMobile||(n.$dropdown.on(Y.focus,n,g).on(Y.blur,n,b),this.on(Y.focus,n,function(e){e.data.$dropdown.trigger(Y.raw.focus)}))}function s(e){e.$dropdown.hasClass(X.open)&&e.$selected.trigger(Y.click),e.$el[0].tabIndex=e.tabIndex,e.$dropdown.off(Y.namespace),e.$options.off(Y.namespace),e.$placeholder.remove(),e.$selected.remove(),e.$wrapper.remove(),e.$el.off(Y.namespace).show().unwrap()}function o(e,t){if("undefined"!=typeof t){var n=e.$items.index(e.$items.filter("[data-value="+t+"]"));e.$items.eq(n).addClass(X.item_disabled),e.$options.eq(n).prop("disabled",!0)}else e.$dropdown.hasClass(X.open)&&e.$selected.trigger(Y.click),e.$dropdown.addClass(X.disabled),e.$el.prop("disabled",!0),e.disabled=!0}function r(e,t){if("undefined"!=typeof t){var n=e.$items.index(e.$items.filter("[data-value="+t+"]"));e.$items.eq(n).removeClass(X.item_disabled),e.$options.eq(n).prop("disabled",!1)}else e.$dropdown.removeClass(X.disabled),e.$el.prop("disabled",!1),e.disabled=!1}function l(e){var t=e.index;e.$allOptions=e.$el.find("option, optgroup"),e.$options=e.$allOptions.filter("option"),e.index=-1,t=e.$options.index(e.$options.filter(":selected")),c(e),e.multiple||y(t,e)}function c(t){for(var n="",i=0,a=0,s=t.$allOptions.length;s>a;a++){var o=t.$allOptions.eq(a),r=[];if("OPTGROUP"===o[0].tagName)r.push(X.group),o.is(":disabled")&&r.push(X.disabled),n+='<span class="'+r.join(" ")+'">'+o.attr("label")+"</span>";else{var l=o.val();o.attr("value")||o.attr("value",l),r.push(X.item),o.hasClass(X.item_placeholder)&&r.push(X.item_placeholder),o.is(":selected")&&r.push(X.item_selected),o.is(":disabled")&&r.push(X.item_disabled),n+='<button type="button" class="'+r.join(" ")+'" ',n+='data-value="'+l+'">',n+=e("<span></span>").text(_(o.text(),t.trim)).html(),n+="</button>",i++}}t.$items=t.$wrapper.html(n).find(P.item)}function d(e){D.killEvent(e);var n=e.data;if(!n.disabled)if(n.mobile||!t.isMobile||t.isFirefoxMobile)n.closed?p(n):u(n);else{var i=n.$el[0];if(I.createEvent){var a=I.createEvent("MouseEvents");a.initMouseEvent("mousedown",!1,!0,q,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(a)}else i.fireEvent&&i.fireEvent("onmousedown")}}function p(t){if(t.closed){e(P.base).not(t.$dropdown).trigger(Y.close,[t]);var n=t.$dropdown.offset(),i=j.outerHeight(),a=t.$wrapper.outerHeight(!0);t.index>=0?t.$items.eq(t.index).position():{left:0,top:0},n.top+a>i&&t.$dropdown.addClass(X.bottom),j.on(t.clickGUID,":not("+P.options+")",t,h),t.$dropdown.addClass(X.open),x(t),t.closed=!1}}function u(e){e&&!e.closed&&(j.off(e.clickGUID),e.$dropdown.removeClass([X.open,X.bottom].join(" ")),e.closed=!0)}function h(t){D.killEvent(t);var n=t.data;n&&0===e(t.currentTarget).parents(P.base).length&&u(n)}function f(e){var t=e.data;t&&u(t)}function m(t){D.killEvent(t);var n=e(this),i=t.data;if(!i.disabled){if(i.$wrapper.is(":visible")){var a=i.$items.index(n);a!==i.index&&(y(a,i),k(i))}i.multiple||u(i)}}function v(t,n){var i=e(this),a=t.data;if(!n&&!a.multiple){var s=a.$options.index(a.$options.filter("[value='"+M(i.val())+"']"));y(s,a),k(a)}}function g(e){D.killEvent(e);var t=e.data;t.disabled||t.multiple||t.$dropdown.addClass(X.focus).on(t.keyDownGUID,t,w)}function b(e,t){D.killEvent(e);var n=e.data;n.$dropdown.removeClass(X.focus).off(n.keyDownGUID),n.multiple||u(n)}function w(n){var i=n.data;if(13===n.keyCode)i.closed||(u(i),y(i.index,i)),k(i);else if(!(9===n.keyCode||n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)){D.killEvent(n);var a=i.$items.length-1,s=i.index<0?0:i.index;if(e.inArray(n.keyCode,t.isFirefox?[38,40,37,39]:[38,40])>-1)s+=38===n.keyCode||t.isFirefox&&37===n.keyCode?-1:1,0>s&&(s=0),s>a&&(s=a);else{var o,r,l=String.fromCharCode(n.keyCode).toUpperCase();for(r=i.index+1;a>=r;r++)if(o=i.$options.eq(r).text().charAt(0).toUpperCase(),o===l){s=r;break}if(0>s||s===i.index)for(r=0;a>=r;r++)if(o=i.$options.eq(r).text().charAt(0).toUpperCase(),o===l){s=r;break}}s>=0&&(y(s,i),x(i))}}function y(e,t){var n=t.$items.eq(e),i=t.$options.eq(e),a=n.hasClass(X.item_selected),s=n.hasClass(X.item_disabled);if(!s)if(t.multiple)a?(i.prop("selected",null),n.removeClass(X.item_selected)):(i.prop("selected",!0),n.addClass(X.item_selected));else if(e>-1&&e<t.$items.length){var o=i.data("label")||n.html();t.$selected.html(o).removeClass(P.item_placeholder),t.$items.filter(P.item_selected).removeClass(X.item_selected),t.$el[0].selectedIndex=e,n.addClass(X.item_selected),t.index=e}else""!==t.label&&t.$selected.html(t.label)}function x(e){var t=e.$items.eq(e.index),n=e.index>=0&&!t.hasClass(P.item_placeholder)?t.position():{left:0,top:0};e.$wrapper.scrollTop(e.$wrapper.scrollTop()+n.top)}function k(e){e.links?C(e):e.$el.trigger(Y.raw.change,[!0])}function C(e){var t=e.$el.val();e.external?q.open(t):q.location.href=t}function _(e,t){return 0===t?e:e.length>t?e.substring(0,t)+"...":e}function M(e){return"string"==typeof e?e.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"):e}var E=t.Plugin("dropdown",{widget:!0,defaults:{cover:!1,customClass:"",label:"",external:!1,links:!1,mobile:!1,trim:0},methods:{_setup:i,_construct:a,_destruct:s,disable:o,enable:r,update:l,open:p,close:u},classes:["cover","bottom","multiple","mobile","open","disabled","focus","selected","options","group","item","item_disabled","item_selected","item_placeholder"],events:{tap:"tap",close:"close"}}),P=E.classes,X=P.raw,Y=E.events,D=E.functions,O=0,q=t.window,I=(t.$window,t.document),j=null}(jQuery,Formstone),!function(e,t,n){"use strict";function i(e){h.iterate.call(m,r)}function a(){m=e(p.element)}function s(t){t.maxWidth=t.maxWidth===1/0?"100000px":t.maxWidth,t.mq="(min-width:"+t.minWidth+") and (max-width:"+t.maxWidth+")",t.mqGuid=u.base+"__"+f++,e.mediaquery("bind",t.mqGuid,t.mq,{enter:function(){c.call(t.$el,t)},leave:function(){l.call(t.$el,t)}}),r(t),a()}function o(e){a()}function r(e){if(e.enabled){var t=e.target?e.$el.find(e.target):e.$el.children(),n="height"===e.property?"outerHeight":"outerWidth",i=0,a=0;t.css(e.property,"");for(var s=0;s<t.length;s++)a=t.eq(s)[n](),a>i&&(i=a);t.css(e.property,i)}}function l(e){if(e.enabled){e.enabled=!1;var t=e.target?e.$el.find(e.target):e.$el.children();"height"===e.property?"outerHeight":"outerWidth",t.css(e.property,"")}}function c(e){e.enabled||(e.enabled=!0,r(e))}var d=t.Plugin("equalize",{widget:!0,priority:5,defaults:{maxWidth:1/0,minWidth:"0px",property:"height",target:null},methods:{_construct:s,_destruct:o,_resize:i}}),p=d.classes,u=p.raw,h=d.functions,f=0,m=[]}(jQuery,Formstone);